<h1>Introduction</h1>
The SPASE (Space Physics Archive Search and Extract) Data Model is a set 
of terms and values along with the relationships between them that allow 
describing all the resources in a heliophysics data environment.  It is 
the result of many years of effort by an international collaboration 
(see http://spase-group.org) to unify and improve on existing Space and 
Solar Physics data models. The intent of this Data Model is to provide 
the means to describe resources, most importantly scientifically useful 
data products, in a uniform way so they may be easily registered, found, 
accessed, and used.

The SPASE data model divides the heliophysics data environment into a 
limited set of resources types.  A key resource type is Numerical Data. 
This type of resource typically consists of a set of files containing 
values of one or more physical variables and that differ from each other 
only by the time span.   To full describe a Numerical Data resource 
requires other types of Resources, namely Observatory, Instrument, 
Person, and Repository, whose names are self-explanatory, and each of 
which has its own set of attributes.   Often, numerical data are 
presented in prepared images (gif or jpeg), and such presentations are 
referred to as Display Data resources.  The other data related resource 
types are Catalog which are lists of events; Annotation which enable 
expert comments on data products; and Granule which describe individual 
files within another resource (i.e., Numerical  Data, Display Data or 
Catalog). Other types of resources include Document which  can 
contain narratives or supporting information; Service that provide 
software to use data resources; Repository for storage locations; and 
Registry for metadata collections. Resource descriptions and the links 
in them are intended to make the Resource useful to scientific users.

<h2>History of Development</h2>
The data model presented here has grown from the efforts begun in 2002 
that became formalized in regular teleconferences of a group of 
interested data providers, including scientific and technical 
representatives of some of the largest data holdings in the US, Europe, 
and Japan. As the effort to provide seamless access to distributed data 
proceeded, it became clear that the data model efforts were central. The 
SPASE Data Model was developed with an iterative process where additions 
were made when unaddressed needs were discovered. The original impetus 
occurred at an ISTP meeting in 1998 where a resolution was passed 
calling to make data more accessible. Interoperability test beds were 
constructed in 2001 and in 2002 a grassroots effort was undertaken to 
define the needs of community. In March of 2003 a meeting of many of the 
people in the Contributors list at the beginning of this document was 
convened to begin the data model construction in earnest. The initial 
effort involved collecting terms from CDPP, SWRI, NSSDC, ISTP, and other 
sets to form a starting point. Two years of teleconferences, e-mailed 
revisions, and occasional face-to-face efforts, along with the 
application of the terms to specific cases, led to the release of 
version 1.0 of the data model in November 2005. Following the release of 
version 1.0 many existing data products were described and lead to 
further improvements of the data model. Version1.1 was released in 
August 2006. At this time NASA established the Heliophysics VxOs and 
after an extended period of use and improvements version 1.2.2 was 
released in August of 2008. The version of the data model described in 
this document is an extension of this earlier release.

<h2>Intended Purpose</h2>
The design of the SPASE data model is based on a core set of principles 
related to the intended purpose of descriptive information (metadata), 
the data environment, and the operational environment.  The overall goal 
of the Data Model is to be able to describe resources using a taxonomy 
of terms familiar to the heliophysics domain. This taxonomy should 
provide sufficient scientific context and data content information for 
an individual to assess the applicability of the resource (data and 
metadata) to a research question. A data model is the cornerstone of an 
information system and one purpose for the SPASE Data Model to enable 
the creation of "Virtual Observatories" that will link the broad range 
of heliophysics resources which may be available in a loosely coupled 
distributed environment. Additional goals of the data model are to:

<dd>
(1) Provide a way of registering products using a standard set of 
terms that allow the products to be found with simple searches and 
described so that users can determine their utility for a specific 
purpose;

(2) Allow searching for products containing particular physical 
quantities (e.g., magnetic field; spectral irradiance) that are 
variously represented in a diverse array of data products; and

(3) Facilitate a means of mapping comparable variables from many 
products onto a common set of terms so that visualization, analysis, and 
higher-order query tools and services can be used on all of them without 
regard to the origin of the data. 
</dd>

The content of a resource description based on the data model should 
enable services (either at the provider or in a VxO) to discover and 
access individual resources. The service layer can contain services for 
a variety of purposes. The basic functionality of the service layer is 
to provide the links necessary to connect user applications and search-
and-retrieval front ends to data repositories. Ultimately, the data 
environment based on the data model will involve a number of software 
tools and services linked together as an internet-based environment. The 
data along with software tools and documentation associated with 
products will be directly accessible using standard web protocols (http, 
ftp). This "system" has the potential to provide capabilities that can 
aid even expert users of a particular dataset (e.g., on-the-fly 
coordinate transformations, the ability to merge datasets from different 
instruments, easy reference to related indices or other data), in 
addition to providing the broad access needed to investigate emerging 
questions in heliophysics.

<h2>Design Principles</h2>
The design of the SPASE data model begins with a few basic principles. These 
principles are:

<b>1. Data is self-documented.
<dd>
Data resources have internal schema or structures for storing values. 
The physical structure is determined by the storage format. Each 
retrievable entity on the format is assigned a key or tag which can be 
used to retrieve the entity. 

The SPASE Data Model does not attempt to describe the physical storage 
of the parameters, for example, the byte offsets, record format or data 
encoding in the data resource. Instead, the SPASE Data Model describes 
the scientific attributes of the parameter and links this to the 
parameter by a key or tag used by the storage format. Applications can 
use the SPASE descriptions to locate a parameter and the appropriate 
format-specific reader to extract parameters.

Not all data in the Heliophysics data environment is stored in self-
documented formats. For example, data stored as ASCII tables. The method 
of assigning a key or tag name for each field in the ASCII table is 
external to the SPASE data model. This method must be part of an 
"format" specification which may be as simple as the first row of the 
table containing the tag name of the field.
</dd>

<b>2. Resources are distributed.
<dd>
There are many providers of resources and these providers can be located 
anywhere in the world.

Each provider operates independently and activities are not necessarily 
coordinated. The SPASE data model assumes that providers have local 
autonomy and may operate under local rules or jurisdictions.
</dd>

<b>3. Online Resources have Universal Resource Locators (URL)
<dd>
If a resource is on-line it can be accessed and retrieved using 
Universal Resource Locators (URL).
</dd>

<b>4. The data environment is continuously evolving.
<dd>
New resources are actively generated either as part of an on-going 
experiment or as a result of analysis and assessment.

These new resources may be directly related to other resources. As new 
resources are generated or new associations defined the network or 
collections formed will expand over time.
</dd>

<h2>Conceptual System Environment</h2>
The data model is intended to enable the sharing of knowledge through 
structured metadata (SPASE Descriptions) which can be exchanged in 
queries and responses between systems. The operational environment this 
occurs in is the current Internet where systems and users are loosely 
coupled and highly distributed. Special services or portals may harvest 
(collect) the SPASE descriptions from multiple sources to create an 
enriched capability for the user. For example, a search engine may 
provide a comprehensive search for a particular scientific discipline. 
The web site http:// hpde.gsfc.nasa.gov gives a guide to many currently 
active projects and a great deal of background information. Of 
particular interest there is the document entitled, "A Framework for 
Space and Solar Physics Virtual Observatories." 

Figure 1 illustrates a conceptual architecture in a distributed 
environment. In this environment multiple communities have resources to 
share. The storage location of a resource is called a repository. Some 
of these repositories (boxes) have local SPASE descriptions which are 
available through a local registry service (balls). The contents of 
other repositories are described at external, possibly independent, 
locations which make the descriptions available through remote 
registries. Gateways (rings) can harvest and aggregate the resources 
from multiple registries or perform federated searches which provide a 
single access point to multiple registries. Applications access the 
registries to discover resources, determine their location and retrieve 
them from the repositories.

<page>

<img src=arch.png>













<h1>Guide to the SPASE Data Model</h1>
<h2>Resource Types</h2>
The top level entity in the SPASE data model is a Resource. There are 12 
different types of resources. Each resource type consists of a set of 
attributes that characterize the resource. The resource types can be 
divided into three categories: Data Resources, Origination Resources and 
Infrastructure Resources.

This section provides an overview of the 
resource types. Complete details for each resource can be found in 
Section 4.

<h3>Data Resources</h3>
Data Resources describe one or more data products. 
A "data product" is a set of data that is uniformly processed and formatted, 
from one or more instruments, typically spanning the full duration of the 
observations of the relevant instrument(s). A data product may consist of a 
collection of granules of successive time spans, but may be high-level 
entities such as event catalogs.
Data products can be images (Display Data), sample or observation values 
(Numerical Data), event lists (Catalog). Included in the Data Resource 
category are the resources used to describe individual files (Granule) 
which are part of data product sets and assessments of a resource 
(Annotations). The complete list of Data Resources is:

<dd>
	Numerical Data, 
<br>
	Display Data,
<br>
	Catalog,
<br>
Granule, and
<br>
Annotation
</dd>

<h3>Origination Resources</h3>
Origination Resources describe the generators or sources of data. 
Included in a Data Resource description is information about the 
origination of the data. A Data Resource will refer to one or more 
Origination Resource. The complete list of Origination Resources is:

<dd>
	Observatory,
<br>
	Instrument,
<br>
	Person, and
<br>
	Document
</dd>

<h3>Infrastructure Resources</h3>
Infrastructure Resources describe system components that are part of the 
exchange and use of data. This includes storage locations for data 
(Repository), metadata (Registry) and functions (Service). The complete 
list of Infrastructure Resources is:

<dd>
	Registry,
<br>
	Repository, and
<br>
	Service
</dd>

<h3>Ontology</h3>
In the SPASE data model there can be associations between 
pairs of resources. Some associations are specific and are required
in order to fully describe a resource. For example, an Instrument
resource is always associated with an Observatory resource.
The specific associations form an ontology which is illustrated 
in Figure 2. The SPASE data model also allows associations of
resources which are not explicitly defined in the ontology. These
associations are described and assigned a relationship type using
generic association attributes.

<page>

<img src=ontology.png>














<h2>Resource Identifiers</h2>
Every resource has a unique identifier so that it can be tracked and 
referenced within a system. This identifier is defined by the naming 
authority for the resource. The entity which acts as the naming 
authority is determined by the agency or group who provides the 
resource. Each resource identifier is a URI that has the form 

<dd>
scheme://authority/path
</dd>

where "scheme" is "spase" for those resources administered through the 
SPASE framework, "authority" is the unique identifier for the naming 
authority within the data environment and "path" is the unique local 
identifier of the resource within the context of the "authority". The 
resource ID must be unique within the data environment.

To illustrate the definition of a resource identifier consider that 
there is a registered "authority" called "SMWG" which maintains 
information for spacecraft (Observatory) resources. One such spacecraft 
is GOES8. Now "SMWG" decides that the "path" to the GOES8 resource description
should  include the Resource Type as part of the path and that the observatory "name"
will be "GOES8". So, the resource identifier would be:

<dd>
spase://SMWG/Observatory/GOES8
</dd>

The Resource ID is used to formally or informally associate one resource 
with another. For example an Instrument resource must be formally 
associated with an Observatory. A Numerical Data resource may be 
formally associated with an Instrument resource and informally 
associated with other Numerical Data resources. The free association of 
resources allows networks or collections to be formed from distributed 
resources and allows for new associations to be formed as needed without 
affecting existing associations.

<h2>Core Attributes</h2>
With the exception of Granule and Person, every resource has a common 
set of core attributes.  The core attributes provide textual 
descriptions of the resource and the capability to reference external 
sources of information (Information URL). It also describes the context 
of the resource in the larger data environment. This context consists of 
associations with other resources (Association) and with previous 
versions (Prior ID). These attributes are grouped in a Resource Header 
and consists of:

<dd>
	Resource Name
<br>
	Alternate Name
<br>
	Release Date
<br>
	Expiration Date
<br>
	Description
<br>
	Acknowledgement
<br>
	Contact
<br>
	Information URL
<br>
	Association
<br>
	Prior ID
</dd>

<h2>Extensions</h2>
The SPASE Data Model allows for additional metadata to be embedded 
within a SPASE description. Every Resource Type has an "Extension" 
element which can contain metadata compliant with other data models. The 
"Extension" element has a SPASE data model type of "Text", but is not 
limited to alphanumeric characters and may contain tagged information.

<h2>Element Data Types</h2>
Each element in the SPASE Data Model has a data type. One design feature 
of the SPASE data model is that an element can contain either a value or 
other elements. Mixed content (elements and values) are not allowed. 
This allows the data model to be implemented in a wider range of 
metadata languages. The following data types are supported:

<b>Container
<dd>
A container of other elements.
</dd>

<b>Count
<dd>
A whole number.
</dd>

<b>DateTime
<dd>
A value is given in the ISO 8601 recommended primary standard notation: 
YYYY-MM-DD. where YYYY is the year in the usual Gregorian calendar, MM 
is the month of the year between 01 (January) and 12 (December), and DD 
is the day of the month between 01 and 31. It may also have an optional 
time portion given in the ISO 8601 recommended primary standard 
notation: HH:MM:SS.sss where HH is the number of complete hours that 
have passed since midnight (00-24), MM is the number of complete minutes 
that have passed since the start of the hour (00-59), and SS is the 
number of complete seconds since the start of the minute (00-60), and 
sss are milliseconds that have passed since the start of the second 
(000-999). Time zones are not allowed so all times are in Universal 
Time. The time portion must follow the date portion with both portions 
separated by a "T". For example, "2004-07-29" is July 29, 2004 and 
"2004-07-29T12:30:00" is precisely 12:30 on July 29, 2004.
</dd>

<b>Duration
<dd>
A duration of time. A time value given in the ISO 8601 recommended 
primary standard notation: PTHH:MM:SS.sss where PT are tokens to 
indicate that the time value is a duration, HH is the number of complete 
hours that have passed since midnight (00-24), MM is the number of 
complete minutes that have passed since the start of the hour (00-59), 
and SS is the number of complete seconds since the start of the minute 
(00-60), and sss are milliseconds that have passed since the start of 
the second (000-999).
</dd>

<b>Enumeration
<dd>
Value is selected from a list of allowed values. The name of list is an 
additional attribute of the element. Lists may be externally controlled 
in which case the location of the list is indicated in the textual 
definition of the element.
</dd>

<b>Item
<dd>
An element which is a value for an enumerated list.
</dd>

<b>Numeric
<dd>
A fractional number which can be expressed in scientific notation. The 
string "NaN" represents not-a-number (flag) values and the string "INF" 
represents an infinitely large value. The value "-INF" represents an 
infinitely small value.
</dd>

<b>Sequence
<dd>
A list of whole number values where the order of the values is fixed. A 
space separates each value. For example, "1 2 3".
</dd>

<b>Text
<dd>
A string of alphanumeric characters. A text based "markup" is supported. 
See Text Mark-up section (3.4.1) for details.
</dd>

<b>URL
<dd>
Universal Resource Locator
</dd>

<h3>Text Mark-up</h3>
While descriptive text may be brief, some formatting of the text may be 
necessary to convey the necessary information, for example, multiple 
paragraphs or nested lists. To ensure system portability text values in 
SPASE are sequences of alphanumeric one byte UTF-8 (US_ASCII) characters 
with white space preserved. When text is displayed in some applications 
(a web browser is the best example) a strict preservation of white space 
may not result in a desirable presentation. Also, to make the metadata 
more human readable (for example in XML) additional white space may be 
introduced in the form of indentation. If strictly preserved, this could 
result in an undesirable presentation. To allow an author to express a 
preferred layout for the text, a special set of text "mark-up" rules are 
defined. The layout can then be determined by normalizing the text and 
applying a simple set of interpretation rules.

<h4>Text Normalization Rules</h4>
To aid in determining the layout or structural intent of the author the 
following rules are to be applied to text to create a normalized form:

<dd>
1.	All lines are to end with a newline character.
<br>
2.	All text is left justified. No line has leading whitespace.
</dd>

<h4>Text Interpretation Rules</h4>
After normalization of text the following rules can be used to interpret 
the layout intent of the author.

<dd>
1.	Blank lines indicate paragraph breaks.
<br>
2.	Lists 
<br>
<dd>
a.	Must be preceded by a blank line.
<br>
b.	Items are indicated by a line beginning with a reserved character 
followed by a space. Three levels of lists are supported. The reserved 
characters are:
<br>
<dd>
            * : First level list
<br>
             - : Second level list (must appear within a first level context)
<br>
             . : Third level list (must appear within a second level context)
</dd>
c.	End with a blank line.
</dd>
3.	Tables 
<br>
<dd>
a.	Begin and end with a line that starts with "+--".
<br>
b.	The first "row" of a table is the field headings.
<br>
c.	Fields in a table are separated with a vertical bar ("|").
<br>
d.	Visual row separators are lines which begin with "|--".
</dd>
</dd>
